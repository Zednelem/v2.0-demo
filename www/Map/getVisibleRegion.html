<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' gap:; script-src 'self' data: https://ssl.gstatic.com 'unsafe-eval'; object-src *; style-src 'self' data: 'unsafe-inline' *; img-src 'self' data:; media-src 'self' data:; font-src 'self' data:; connect-src *">
    <link rel="stylesheet" type="text/css" href="../code-prettify/prettify.css" />
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <script type="text/javascript" src="../cordova.js"></script>
    <script type="text/javascript" src="../js/loader.js"></script>
    <script src="../code-prettify/run_prettify.js" async="async"></script>
    <script src="../js/menu.js" async="async"></script>
</head>

<body>

    <div id="menuView"><ul id="menu"></ul></div>
    <div id="header">
        <div id="menuButton"></div><h3>map.getVisibleRegion()</h3>
    </div>
    <div id="contentView">
        <div id="contentsFrame">
            <section class="demo">

                <p>
                    Returns the latLngBounds that contains the four points defining the polygon that is visible in a map's camera.

                    The word: "<span class="highlight">Visible region</span>" means the latLngBounds that containts four points of the map, left-top, right-top, right-bottom, and left-bottom. Not equal with viewport region.

                    This polygon can be a trapezoid instead of a rectangle, because a camera can have tilt. If the camera is directly over the center of the camera, the shape is rectangular, but if the camera is tilted, the shape will appear to be a trapezoid whose smallest side is closest to the point of view.


                    In the below example, the blue rectangle represents the visible region, the red rectangle represents the viewport region.
                </p>
                <div class="map" id="map_canvas">
                    <span class="smallPanel"><button>Click here</button></span>
                </div>
                <pre class="prettyprint">var div = document.getElementById("map_canvas");
var map = plugin.google.maps.Map.getMap(div, {
  camera: {
    target: {
      lat: 37.422858,
      lng: -122.085065
    },
    zoom: 15,
    bearing: 150
  }
});
map.one(plugin.google.maps.event.MAP_READY, function() {

  var button = div.getElementsByTagName('button')[0];
  button.addEventListener('click', function() {

    // Get the visible region (LatLngBounds of SouthWest and NorthEast)
    var latLngBounds = map.getVisibleRegion();
    map.addPolygon({
      'points': [
        latLngBounds.northeast,
        {lat: latLngBounds.northeast.lat, lng: latLngBounds.southwest.lng},
        latLngBounds.southwest,
        {lat: latLngBounds.southwest.lat, lng: latLngBounds.northeast.lng}
      ],
      'strokeColor' : 'blue',
      'strokeWidth': 2,
      'fillColor': 'transparent'
    });

    var mapDiv = map.getDiv();
    var batch1 = new plugin.google.maps.BaseArrayClass();
    batch1.push([0, 0]); //left-top
    batch1.push([mapDiv.offsetWidth, 0]); //right-top
    batch1.push([mapDiv.offsetWidth, mapDiv.offsetHeight]); //right-bottom
    batch1.push([0, mapDiv.offsetHeight]); //left-bottom

    batch1.map(function(point, cb) {
      map.fromPointToLatLng(point, cb);
    }, function(values) {
      map.addPolygon({
        'points': values,
        'strokeColor' : 'red',
        'strokeWidth': 2,
        'fillColor': 'rgba(255, 0, 0, 0.5)'
      });
    });

    map.animateCameraZoomOut();

  });

});
</pre>
            </section>
        </div>


    </div>
</body>

</html>
